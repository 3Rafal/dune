(rule (write-file generated-file dynamic-contents))

(alias
  (name test-dep)
  (action (cat %{dep:generated-file})))

(alias
  (name test-path)
  (action
    (chdir
      sub-tree/dir
      (progn
        (echo "%{path:file-that-does-not-exist}\n")
        (echo "%{path:.}\n")))))

(alias
  (name test-path-no-dep)
  (action
    (chdir
      sub-tree/dir
      (progn
        (echo "%{path-no-dep:file-that-does-not-exist}\n")
        (echo "%{path-no-dep:.}\n")))))
